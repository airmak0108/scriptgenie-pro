<script>
  async function post(url, body){
    const r = await fetch(url, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(body)
    });
    return await r.json();
  }
  document.getElementById('generate').addEventListener('click', async ()=>{
    const language = document.getElementById('language').value;
    const niche = document.getElementById('niche').value;
    const topic = document.getElementById('topic').value;
    const tone = document.getElementById('tone').value;
    const audience = document.getElementById('audience').value;

    document.getElementById('out').textContent = 'Generating SCRIPT only...';
    document.getElementById('audioWrap').innerHTML = '';

    // call script-only endpoint
    const j = await post('/api/generate-script', { language, niche, topic, tone, audience });
    if (!j.ok){
      document.getElementById('out').textContent = JSON.stringify(j, null, 2);
      return;
    }

    document.getElementById('out').textContent = JSON.stringify(j.data, null, 2);
    // No voice in this test
  });
</script>
